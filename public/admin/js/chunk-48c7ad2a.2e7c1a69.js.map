{"version":3,"sources":["webpack:///./src/layouts/cards/layout.vue?99c6","webpack:///./node_modules/@directus/extension-toolkit/mixins/layout.js","webpack:///./src/layouts/cards/layout.vue?4e27","webpack:///src/layouts/cards/layout.vue","webpack:///./src/layouts/cards/layout.vue?4928","webpack:///./src/layouts/cards/layout.vue"],"names":["module","exports","props","primaryKeyField","type","String","required","fields","Object","items","Array","default","viewOptions","viewQuery","loading","Boolean","lazyLoading","selection","link","sortField","collection","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","onScroll","class","_l","item","index","key","id","attrs","emptySrc","icon","src","includes","length","$event","select","slot","title","interface","options","relation","subtitle","_e","$t","staticRenderFns","component"],"mappings":"uIAAA,yBAAwjB,EAAG,G,mBCA3jBA,EAAOC,QAAU,CACfC,MAAO,CACLC,gBAAiB,CACfC,KAAMC,OACNC,UAAU,GAEZC,OAAQ,CACNH,KAAMI,OACNF,UAAU,GAEZG,MAAO,CACLL,KAAMM,MACNC,QAAS,IAAM,IAEjBC,YAAa,CACXR,KAAMI,OACNG,QAAS,KAAM,KAEjBE,UAAW,CACTT,KAAMI,OACNG,QAAS,KAAM,KAEjBG,QAAS,CACPV,KAAMW,QACNJ,SAAS,GAEXK,YAAa,CACXZ,KAAMW,QACNJ,SAAS,GAEXM,UAAW,CACTb,KAAMM,MACNC,QAAS,IAAM,IAEjBO,KAAM,CACJd,KAAMC,OACNM,QAAS,MAEXQ,UAAW,CACTf,KAAMC,OACNM,QAAS,MAEXS,WAAY,CACVhB,KAAMC,OACNM,QAAS,S,yCC5Cf,IAAIU,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,eAAeC,GAAG,CAAC,OAASP,EAAIQ,WAAW,CAACJ,EAAG,MAAM,CAACE,YAAY,QAAQG,MAAM,CAAEjB,QAASQ,EAAIR,UAAW,CAACQ,EAAIU,GAAIV,EAAS,OAAE,SAASW,EAAKC,GAAO,OAAOR,EAAG,SAAS,CAACS,IAAIF,EAAKG,GAAGC,MAAM,CAAC,GAAKJ,EAAKX,EAAIJ,MAAM,KAAOI,EAAIgB,SAASL,GAAQX,EAAIV,YAAY2B,MAAQ,QAAU,KAAK,QAAUjB,EAAIgB,SAASL,GAAQ,OAAS,KAAK,IAAMX,EAAIkB,IAAIP,GAAM,SAAWX,EAAIL,UAAUwB,SAASR,EAAKG,IAAI,iBAAiBd,EAAIL,UAAUyB,OAAS,GAAGb,GAAG,CAAC,OAAS,SAASc,GAAQ,OAAOrB,EAAIsB,OAAOX,EAAKG,OAAO,CAACV,EAAG,WAAW,CAACmB,KAAK,SAAS,CAACnB,EAAG,gBAAgB,CAACS,IAAK,cAAiBb,EAAIf,OAAOe,EAAIwB,OAAgB,UAAI,IAAMZ,EAAOG,MAAM,CAAC,iBAAiBf,EAAIf,OAAOe,EAAIwB,OAAOC,UAAU,KAAOzB,EAAIwB,MAAM,WAAaxB,EAAIF,WAAW,KAAOE,EAAIf,OAAOe,EAAIwB,OAAO1C,KAAK,QAAUkB,EAAIf,OAAOe,EAAIwB,OAAOE,QAAQ,MAAQf,EAAKX,EAAIwB,OAAO,OAASb,EAAK,SAAWX,EAAIf,OAAOe,EAAIwB,OAAOG,aAAa,GAAI3B,EAAY,SAAEI,EAAG,WAAW,CAACmB,KAAK,YAAY,CAACnB,EAAG,gBAAgB,CAACS,IAAK,iBAAoBb,EAAIf,OAAOe,EAAI4B,UAAmB,UAAI,IAAMhB,EAAOG,MAAM,CAAC,iBAAiBf,EAAIf,OAAOe,EAAI4B,UAAUH,UAAU,KAAOzB,EAAI4B,SAAS,WAAa5B,EAAIF,WAAW,KAAOE,EAAIf,OAAOe,EAAI4B,UAAU9C,KAAK,QAAUkB,EAAIf,OAAOe,EAAI4B,UAAUF,QAAQ,MAAQf,EAAKX,EAAI4B,UAAU,OAASjB,EAAK,SAAWX,EAAIf,OAAOe,EAAI4B,UAAUD,aAAa,GAAG3B,EAAI6B,MAAM,MAAM7B,EAAe,YAAEI,EAAG,SAAS,CAACW,MAAM,CAAC,KAAO,kBAAkB,QAAU,OAAO,MAAQf,EAAI8B,GAAG,gBAAgB,SAAW9B,EAAI8B,GAAG,iBAAiB9B,EAAI6B,MAAM,GAAI7B,EAAW,QAAEI,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,cAAc,GAAGJ,EAAI6B,QAC1nDE,EAAkB,G,uHC2DtB,GACA,mBACA,aACA,0CACA,uCADA,IAEA,MAFA,WAGA,qDAEA,SALA,WAMA,kCAEA,QARA,WASA,mCAGA,SACA,IADA,SACA,GACA,iCAEA,YACA,OAMA,GAJA,iDACA,MAGA,cAEA,+CAEA,kDAEA,mCAEA,0HACA,IAGA,aAEA,SAzBA,SAyBA,GACA,uDAEA,SA5BA,SA4BA,SACA,eADA,EACA,eADA,EACA,eADA,EACA,UACA,MACA,MACA,gCACA,mBAEA,OAnCA,SAmCA,GACA,MAGA,EADA,2BACA,mDAEA,8CAGA,0BCvH+V,I,wBCQ3VC,EAAY,eACd,EACAjC,EACAgC,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"js/chunk-48c7ad2a.2e7c1a69.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layout.vue?vue&type=style&index=0&id=40283c5b&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layout.vue?vue&type=style&index=0&id=40283c5b&lang=scss&scoped=true&\"","module.exports = {\n  props: {\n    primaryKeyField: {\n      type: String,\n      required: true\n    },\n    fields: {\n      type: Object,\n      required: true\n    },\n    items: {\n      type: Array,\n      default: () => ([])\n    },\n    viewOptions: {\n      type: Object,\n      default: () => ({})\n    },\n    viewQuery: {\n      type: Object,\n      default: () => ({})\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    lazyLoading: {\n      type: Boolean,\n      default: false\n    },\n    selection: {\n      type: Array,\n      default: () => []\n    },\n    link: {\n      type: String,\n      default: null\n    },\n    sortField: {\n      type: String,\n      default: null\n    },\n    collection: {\n      type: String,\n      default: null\n    }\n  }\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"layout-cards\",on:{\"scroll\":_vm.onScroll}},[_c('div',{staticClass:\"cards\",class:{ loading: _vm.loading }},[_vm._l((_vm.items),function(item,index){return _c('v-card',{key:item.id,attrs:{\"to\":item[_vm.link],\"icon\":_vm.emptySrc(item) ? _vm.viewOptions.icon || 'photo' : null,\"opacity\":_vm.emptySrc(item) ? 'half' : null,\"src\":_vm.src(item),\"selected\":_vm.selection.includes(item.id),\"selection-mode\":_vm.selection.length > 0},on:{\"select\":function($event){return _vm.select(item.id)}}},[_c('template',{slot:\"title\"},[_c('v-ext-display',{key:(\"card-title-\" + (_vm.fields[_vm.title].interface) + \"-\" + index),attrs:{\"interface-type\":_vm.fields[_vm.title].interface,\"name\":_vm.title,\"collection\":_vm.collection,\"type\":_vm.fields[_vm.title].type,\"options\":_vm.fields[_vm.title].options,\"value\":item[_vm.title],\"values\":item,\"relation\":_vm.fields[_vm.title].relation}})],1),(_vm.subtitle)?_c('template',{slot:\"subtitle\"},[_c('v-ext-display',{key:(\"card-subtitle-\" + (_vm.fields[_vm.subtitle].interface) + \"-\" + index),attrs:{\"interface-type\":_vm.fields[_vm.subtitle].interface,\"name\":_vm.subtitle,\"collection\":_vm.collection,\"type\":_vm.fields[_vm.subtitle].type,\"options\":_vm.fields[_vm.subtitle].options,\"value\":item[_vm.subtitle],\"values\":item,\"relation\":_vm.fields[_vm.subtitle].relation}})],1):_vm._e()],2)}),(_vm.lazyLoading)?_c('v-card',{attrs:{\"icon\":\"hourglass_empty\",\"opacity\":\"half\",\"title\":_vm.$t('loading_more'),\"subtitle\":_vm.$t('one_moment')}}):_vm._e()],2),(_vm.loading)?_c('div',{staticClass:\"layout-loading\"},[_c('v-spinner')],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"layout-cards\" @scroll=\"onScroll\">\r\n\t\t<div class=\"cards\" :class=\"{ loading: loading }\">\r\n\t\t\t<v-card\r\n\t\t\t\tv-for=\"(item, index) in items\"\r\n\t\t\t\t:key=\"item.id\"\r\n\t\t\t\t:to=\"item[link]\"\r\n\t\t\t\t:icon=\"emptySrc(item) ? viewOptions.icon || 'photo' : null\"\r\n\t\t\t\t:opacity=\"emptySrc(item) ? 'half' : null\"\r\n\t\t\t\t:src=\"src(item)\"\r\n\t\t\t\t:selected=\"selection.includes(item.id)\"\r\n\t\t\t\t:selection-mode=\"selection.length > 0\"\r\n\t\t\t\t@select=\"select(item.id)\"\r\n\t\t\t>\r\n\t\t\t\t<template slot=\"title\">\r\n\t\t\t\t\t<v-ext-display\r\n\t\t\t\t\t\t:key=\"`card-title-${fields[title].interface}-${index}`\"\r\n\t\t\t\t\t\t:interface-type=\"fields[title].interface\"\r\n\t\t\t\t\t\t:name=\"title\"\r\n\t\t\t\t\t\t:collection=\"collection\"\r\n\t\t\t\t\t\t:type=\"fields[title].type\"\r\n\t\t\t\t\t\t:options=\"fields[title].options\"\r\n\t\t\t\t\t\t:value=\"item[title]\"\r\n\t\t\t\t\t\t:values=\"item\"\r\n\t\t\t\t\t\t:relation=\"fields[title].relation\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</template>\r\n\t\t\t\t<template v-if=\"subtitle\" slot=\"subtitle\">\r\n\t\t\t\t\t<v-ext-display\r\n\t\t\t\t\t\t:key=\"`card-subtitle-${fields[subtitle].interface}-${index}`\"\r\n\t\t\t\t\t\t:interface-type=\"fields[subtitle].interface\"\r\n\t\t\t\t\t\t:name=\"subtitle\"\r\n\t\t\t\t\t\t:collection=\"collection\"\r\n\t\t\t\t\t\t:type=\"fields[subtitle].type\"\r\n\t\t\t\t\t\t:options=\"fields[subtitle].options\"\r\n\t\t\t\t\t\t:value=\"item[subtitle]\"\r\n\t\t\t\t\t\t:values=\"item\"\r\n\t\t\t\t\t\t:relation=\"fields[subtitle].relation\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</template>\r\n\t\t\t</v-card>\r\n\t\t\t<v-card\r\n\t\t\t\tv-if=\"lazyLoading\"\r\n\t\t\t\ticon=\"hourglass_empty\"\r\n\t\t\t\topacity=\"half\"\r\n\t\t\t\t:title=\"$t('loading_more')\"\r\n\t\t\t\t:subtitle=\"$t('one_moment')\"\r\n\t\t\t></v-card>\r\n\t\t</div>\r\n\r\n\t\t<div v-if=\"loading\" class=\"layout-loading\">\r\n\t\t\t<v-spinner />\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport mixin from '@directus/extension-toolkit/mixins/layout';\r\nimport { mapState } from 'vuex';\r\n\r\nexport default {\r\n\tname: 'LayoutCards',\r\n\tmixins: [mixin],\r\n\tcomputed: {\r\n\t\t...mapState(['currentProjectKey']),\r\n\t\ttitle() {\r\n\t\t\treturn this.viewOptions.title || this.primaryKeyField;\r\n\t\t},\r\n\t\tsubtitle() {\r\n\t\t\treturn this.viewOptions.subtitle;\r\n\t\t},\r\n\t\tcontent() {\r\n\t\t\treturn this.viewOptions.content;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tsrc(item) {\r\n\t\t\tconst srcField = this.viewOptions.src || null;\r\n\r\n\t\t\tif (srcField) {\r\n\t\t\t\tlet file = item[srcField];\r\n\r\n\t\t\t\tif (srcField === 'data' && this.collection === 'directus_files') {\r\n\t\t\t\t\tfile = item;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!file) return null;\r\n\r\n\t\t\t\tif (file.type.startsWith('image') === false) return null;\r\n\r\n\t\t\t\tif (file.type.includes('svg')) return file.data.asset_url;\r\n\r\n\t\t\t\tconst fit = this.viewOptions.fit || 'crop';\r\n\r\n\t\t\t\treturn file.data.thumbnails.find(thumb => thumb.key === `directus-medium-${fit}`)\r\n\t\t\t\t\t?.url;\r\n\t\t\t}\r\n\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\temptySrc(item) {\r\n\t\t\treturn this.viewOptions.src != null && this.src(item) === null;\r\n\t\t},\r\n\t\tonScroll(event) {\r\n\t\t\tconst { scrollHeight, clientHeight, scrollTop } = event.srcElement;\r\n\t\t\tconst totalScroll = scrollHeight - clientHeight;\r\n\t\t\tconst delta = totalScroll - scrollTop;\r\n\t\t\tif (delta <= 500) this.$emit('next-page');\r\n\t\t\tthis.scrolled = scrollTop > 0;\r\n\t\t},\r\n\t\tselect(id) {\r\n\t\t\tlet newSelection;\r\n\r\n\t\t\tif (this.selection.includes(id)) {\r\n\t\t\t\tnewSelection = this.selection.filter(selectedID => selectedID !== id);\r\n\t\t\t} else {\r\n\t\t\t\tnewSelection = [...this.selection, id];\r\n\t\t\t}\r\n\r\n\t\t\tthis.$emit('select', newSelection);\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.layout-cards {\r\n\toverflow: auto;\r\n\theight: 100%;\r\n\tmax-height: calc(100vh - var(--header-height-expanded));\r\n}\r\n\r\n.toolbar {\r\n\tbackground-color: var(--page-background-color);\r\n\twidth: 100%;\r\n\tposition: sticky;\r\n\ttop: 0;\r\n\tz-index: +1;\r\n\theight: var(--header-height);\r\n\tpadding: 28px var(--page-padding);\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: flex-end;\r\n\tborder-bottom: 2px solid var(--sidebar-background-color);\r\n}\r\n\r\n.sort-select {\r\n\tposition: relative;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\r\n\tmargin: 0 10px;\r\n\r\n\t&:last-of-type {\r\n\t\tmargin-right: 0;\r\n\t}\r\n\r\n\tselect {\r\n\t\t-webkit-appearance: none;\r\n\t\t-moz-appearance: none;\r\n\t\tappearance: none;\r\n\t\tvertical-align: middle;\r\n\t\tbackground-color: var(--input-background-color-alt);\r\n\t\tborder-radius: var(--border-radius);\r\n\t\tborder: 0;\r\n\t\toverflow: hidden;\r\n\t\tpadding: 5px;\r\n\t\tpadding-right: 15px;\r\n\t\tcursor: pointer;\r\n\t\toutline: 0;\r\n\t}\r\n\r\n\t.icon {\r\n\t\tpointer-events: none;\r\n\t\tposition: absolute;\r\n\t\tright: 0;\r\n\t\ttop: 50%;\r\n\t\ttransform: translateY(-50%);\r\n\t}\r\n}\r\n\r\n.cards {\r\n\tpadding: var(--page-padding-top) var(--page-padding) var(--page-padding-bottom);\r\n\tdisplay: grid;\r\n\tgrid-template-columns: repeat(auto-fill, var(--card-size));\r\n\tgrid-gap: var(--card-vertical-gap) var(--card-horizontal-gap);\r\n\tjustify-content: space-between;\r\n\twidth: 100%;\r\n\r\n\t&.loading {\r\n\t\topacity: 0.5;\r\n\t}\r\n}\r\n\r\n.layout-loading {\r\n\tpadding: 24px 0;\r\n\ttext-align: center;\r\n\r\n\t.v-spinner {\r\n\t\tdisplay: inline-block;\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layout.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layout.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./layout.vue?vue&type=template&id=40283c5b&scoped=true&\"\nimport script from \"./layout.vue?vue&type=script&lang=js&\"\nexport * from \"./layout.vue?vue&type=script&lang=js&\"\nimport style0 from \"./layout.vue?vue&type=style&index=0&id=40283c5b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"40283c5b\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}