{"version":3,"sources":["webpack:///./src/layouts/cards/options.vue?1ed7","webpack:///./src/layouts/cards/options.vue?a795","webpack:///src/layouts/cards/options.vue","webpack:///./src/layouts/cards/options.vue?d89d","webpack:///./src/layouts/cards/options.vue","webpack:///./node_modules/@directus/extension-toolkit/mixins/layout.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","on","$event","preventDefault","staticClass","_v","_s","$t","attrs","sortedOn","setSort","_l","fieldInfo","name","key","domProps","$helpers","formatTitle","sortDirection","setSortDirection","viewOptions","src","fileOptions","setOption","fit","crop","contain","title","primaryKeyField","titleFieldOptions","subtitle","fieldOptions","icon","staticRenderFns","component","module","exports","props","type","String","required","fields","Object","items","Array","default","viewQuery","loading","Boolean","lazyLoading","selection","link","sortField","collection"],"mappings":"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","file":"js/chunk-c4120bb8.b6966c71.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./options.vue?vue&type=style&index=0&id=ae5cea1a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./options.vue?vue&type=style&index=0&id=ae5cea1a&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{on:{\"submit\":function($event){$event.preventDefault();}}},[_c('label',{staticClass:\"type-label\"},[_vm._v(_vm._s(_vm.$t('sort_by')))]),_c('v-simple-select',{attrs:{\"value\":_vm.sortedOn},on:{\"input\":function($event){return _vm.setSort($event)}}},_vm._l((_vm.sortableFields),function(fieldInfo,name){return _c('option',{key:name,domProps:{\"value\":name}},[_vm._v(\" \"+_vm._s(_vm.$helpers.formatTitle(name))+\" \")])}),0),_c('label',{staticClass:\"type-label\",attrs:{\"for\":\"src\"}},[_vm._v(_vm._s(_vm.$t('sort_direction')))]),_c('v-simple-select',{attrs:{\"value\":_vm.sortDirection},on:{\"input\":function($event){return _vm.setSortDirection($event)}}},[_c('option',{attrs:{\"value\":\"asc\"}},[_vm._v(_vm._s(_vm.$t('ASC')))]),_c('option',{attrs:{\"value\":\"desc\"}},[_vm._v(_vm._s(_vm.$t('DESC')))])]),_c('label',{staticClass:\"type-label\",attrs:{\"for\":\"src\"}},[_vm._v(_vm._s(_vm.$t('layouts.cards.src')))]),_c('v-select',{attrs:{\"id\":\"src\",\"value\":_vm.viewOptions.src || '__none__',\"options\":_vm.fileOptions,\"icon\":\"image\"},on:{\"input\":function($event){return _vm.setOption('src', $event === '__none__' ? null : $event)}}}),_c('label',{staticClass:\"type-label\",attrs:{\"for\":\"fit\"}},[_vm._v(_vm._s(_vm.$t('layouts.cards.fit')))]),_c('v-select',{attrs:{\"id\":\"fit\",\"value\":_vm.viewOptions.fit || 'crop',\"options\":{\n\t\t\tcrop: 'Crop',\n\t\t\tcontain: 'Contain'\n\t\t},\"icon\":_vm.viewOptions.fit === 'crop' ? 'crop' : 'crop_free'},on:{\"input\":function($event){return _vm.setOption('fit', $event)}}}),_c('label',{staticClass:\"type-label\",attrs:{\"for\":\"title\"}},[_vm._v(_vm._s(_vm.$t('layouts.cards.title')))]),_c('v-select',{attrs:{\"id\":\"title\",\"value\":_vm.viewOptions.title || _vm.primaryKeyField,\"options\":_vm.titleFieldOptions,\"icon\":\"title\"},on:{\"input\":function($event){return _vm.setOption('title', $event === '__none__' ? null : $event)}}}),_c('label',{staticClass:\"type-label\",attrs:{\"for\":\"subtitle\"}},[_vm._v(\" \"+_vm._s(_vm.$t('layouts.cards.subtitle'))+\" \")]),_c('v-select',{attrs:{\"id\":\"subtitle\",\"value\":_vm.viewOptions.subtitle || '__none__',\"options\":_vm.fieldOptions,\"icon\":\"title\"},on:{\"input\":function($event){return _vm.setOption('subtitle', $event === '__none__' ? null : $event)}}}),_c('label',{staticClass:\"type-label\",attrs:{\"for\":\"icon\"}},[_vm._v(\"Fallback Icon\")]),_c('v-input',{attrs:{\"value\":_vm.viewOptions.icon || 'photo',\"icon-left\":\"broken_image\"},on:{\"input\":function($event){return _vm.setOption('icon', $event)}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<form @submit.prevent>\r\n\t\t<label class=\"type-label\">{{ $t('sort_by') }}</label>\r\n\t\t<v-simple-select :value=\"sortedOn\" @input=\"setSort($event)\">\r\n\t\t\t<option v-for=\"(fieldInfo, name) in sortableFields\" :key=\"name\" :value=\"name\">\r\n\t\t\t\t{{ $helpers.formatTitle(name) }}\r\n\t\t\t</option>\r\n\t\t</v-simple-select>\r\n\r\n\t\t<label for=\"src\" class=\"type-label\">{{ $t('sort_direction') }}</label>\r\n\t\t<v-simple-select :value=\"sortDirection\" @input=\"setSortDirection($event)\">\r\n\t\t\t<option value=\"asc\">{{ $t('ASC') }}</option>\r\n\t\t\t<option value=\"desc\">{{ $t('DESC') }}</option>\r\n\t\t</v-simple-select>\r\n\r\n\t\t<label for=\"src\" class=\"type-label\">{{ $t('layouts.cards.src') }}</label>\r\n\t\t<v-select\r\n\t\t\tid=\"src\"\r\n\t\t\t:value=\"viewOptions.src || '__none__'\"\r\n\t\t\t:options=\"fileOptions\"\r\n\t\t\ticon=\"image\"\r\n\t\t\t@input=\"setOption('src', $event === '__none__' ? null : $event)\"\r\n\t\t></v-select>\r\n\r\n\t\t<label for=\"fit\" class=\"type-label\">{{ $t('layouts.cards.fit') }}</label>\r\n\t\t<v-select\r\n\t\t\tid=\"fit\"\r\n\t\t\t:value=\"viewOptions.fit || 'crop'\"\r\n\t\t\t:options=\"{\r\n\t\t\t\tcrop: 'Crop',\r\n\t\t\t\tcontain: 'Contain'\r\n\t\t\t}\"\r\n\t\t\t:icon=\"viewOptions.fit === 'crop' ? 'crop' : 'crop_free'\"\r\n\t\t\t@input=\"setOption('fit', $event)\"\r\n\t\t></v-select>\r\n\r\n\t\t<label for=\"title\" class=\"type-label\">{{ $t('layouts.cards.title') }}</label>\r\n\t\t<v-select\r\n\t\t\tid=\"title\"\r\n\t\t\t:value=\"viewOptions.title || primaryKeyField\"\r\n\t\t\t:options=\"titleFieldOptions\"\r\n\t\t\ticon=\"title\"\r\n\t\t\t@input=\"setOption('title', $event === '__none__' ? null : $event)\"\r\n\t\t></v-select>\r\n\r\n\t\t<label for=\"subtitle\" class=\"type-label\">\r\n\t\t\t{{ $t('layouts.cards.subtitle') }}\r\n\t\t</label>\r\n\t\t<v-select\r\n\t\t\tid=\"subtitle\"\r\n\t\t\t:value=\"viewOptions.subtitle || '__none__'\"\r\n\t\t\t:options=\"fieldOptions\"\r\n\t\t\ticon=\"title\"\r\n\t\t\t@input=\"setOption('subtitle', $event === '__none__' ? null : $event)\"\r\n\t\t></v-select>\r\n\r\n\t\t<label for=\"icon\" class=\"type-label\">Fallback Icon</label>\r\n\t\t<v-input\r\n\t\t\t:value=\"viewOptions.icon || 'photo'\"\r\n\t\t\ticon-left=\"broken_image\"\r\n\t\t\t@input=\"setOption('icon', $event)\"\r\n\t\t></v-input>\r\n\t</form>\r\n</template>\r\n\r\n<script>\r\nimport mixin from '@directus/extension-toolkit/mixins/layout';\r\nimport { mapValues, pickBy, filter, keyBy } from 'lodash';\r\n\r\nexport default {\r\n\tmixins: [mixin],\r\n\tcomputed: {\r\n\t\ttitleFieldOptions() {\r\n\t\t\treturn {\r\n\t\t\t\t...mapValues(this.fields, info => info.name)\r\n\t\t\t};\r\n\t\t},\r\n\t\tfieldOptions() {\r\n\t\t\treturn {\r\n\t\t\t\t__none__: `(${this.$t('dont_show')})`,\r\n\t\t\t\t...mapValues(this.fields, info => info.name)\r\n\t\t\t};\r\n\t\t},\r\n\t\tsortableFields() {\r\n\t\t\treturn pickBy(this.fields, field => field.datatype);\r\n\t\t},\r\n\t\tsortedOn() {\r\n\t\t\tlet fieldName;\r\n\t\t\tconst sortableFieldNames = Object.keys(this.sortableFields);\r\n\t\t\tconst viewQuerySort = this.viewQuery.sort;\r\n\t\t\tif (\r\n\t\t\t\tsortableFieldNames &&\r\n\t\t\t\tviewQuerySort &&\r\n\t\t\t\tsortableFieldNames.some(sortableFieldName => sortableFieldName === viewQuerySort)\r\n\t\t\t) {\r\n\t\t\t\tfieldName = viewQuerySort;\r\n\t\t\t} else if (sortableFieldNames && sortableFieldNames.length > 0) {\r\n\t\t\t\t// If the user didn't sort, default to the first field\r\n\t\t\t\tfieldName = sortableFieldNames[0];\r\n\t\t\t} else {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\r\n\t\t\t// If the sort viewQuery was already descending, remove the - so we don't\r\n\t\t\t// run into server errors with double direction characters\r\n\t\t\tif (fieldName.startsWith('-')) fieldName = fieldName.substring(1);\r\n\r\n\t\t\treturn fieldName;\r\n\t\t},\r\n\t\tsortDirection() {\r\n\t\t\tif (!this.viewQuery.sort) return 'asc';\r\n\r\n\t\t\tif (this.viewQuery.sort.substring(0, 1) === '-') return 'desc';\r\n\r\n\t\t\treturn 'asc';\r\n\t\t},\r\n\t\tfileOptions() {\r\n\t\t\tconst fileTypeFields = filter(this.fields, info => info.type.toLowerCase() === 'file');\r\n\t\t\tconst fields = keyBy(fileTypeFields, 'field');\r\n\t\t\tconst options = {\r\n\t\t\t\t__none__: `(${this.$t('dont_show')})`,\r\n\t\t\t\t...mapValues(fields, info => info.name)\r\n\t\t\t};\r\n\r\n\t\t\t// Check if one of the fields is `data`. If that's the case, make sure that this\r\n\t\t\t//   field is for the directus_files collection and it's an ALIAS type\r\n\t\t\t//\r\n\t\t\t// This is a hardcoded addition to make sure that directus_files can be used in the cards view preview\r\n\t\t\tif ('data' in this.fields) {\r\n\t\t\t\tconst field = this.fields.data;\r\n\r\n\t\t\t\tif (field.type.toLowerCase() === 'alias' && field.collection === 'directus_files') {\r\n\t\t\t\t\toptions.data = this.$t('file');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn options;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tsetOption(field, value) {\r\n\t\t\tthis.$emit('options', {\r\n\t\t\t\t...this.viewOptions,\r\n\t\t\t\t[field]: value\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetSort(fieldName) {\r\n\t\t\tthis.$emit('query', {\r\n\t\t\t\tsort: fieldName\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetSortDirection(direction) {\r\n\t\t\tthis.$emit('query', {\r\n\t\t\t\tsort: (direction === 'desc' ? '-' : '') + this.sortedOn\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.type-label {\r\n\tmargin-top: var(--form-vertical-gap);\r\n\tmargin-bottom: var(--input-label-margin);\r\n\t&:first-of-type {\r\n\t\tmargin-top: 0;\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./options.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./options.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./options.vue?vue&type=template&id=ae5cea1a&scoped=true&\"\nimport script from \"./options.vue?vue&type=script&lang=js&\"\nexport * from \"./options.vue?vue&type=script&lang=js&\"\nimport style0 from \"./options.vue?vue&type=style&index=0&id=ae5cea1a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ae5cea1a\",\n  null\n  \n)\n\nexport default component.exports","module.exports = {\n  props: {\n    primaryKeyField: {\n      type: String,\n      required: true\n    },\n    fields: {\n      type: Object,\n      required: true\n    },\n    items: {\n      type: Array,\n      default: () => ([])\n    },\n    viewOptions: {\n      type: Object,\n      default: () => ({})\n    },\n    viewQuery: {\n      type: Object,\n      default: () => ({})\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    lazyLoading: {\n      type: Boolean,\n      default: false\n    },\n    selection: {\n      type: Array,\n      default: () => []\n    },\n    link: {\n      type: String,\n      default: null\n    },\n    sortField: {\n      type: String,\n      default: null\n    },\n    collection: {\n      type: String,\n      default: null\n    }\n  }\n};\n"],"sourceRoot":""}