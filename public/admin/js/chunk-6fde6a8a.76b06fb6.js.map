{"version":3,"sources":["webpack:///./src/interfaces/repeater/input.vue?3cff","webpack:///./src/interfaces/repeater/row.vue?b4bf","webpack:///src/interfaces/repeater/row.vue","webpack:///./src/interfaces/repeater/row.vue?c4f1","webpack:///./src/interfaces/repeater/row.vue","webpack:///src/interfaces/repeater/input.vue","webpack:///./src/interfaces/repeater/input.vue?739d","webpack:///./src/interfaces/repeater/input.vue","webpack:///./src/interfaces/repeater/row.vue?445e","webpack:///./node_modules/@directus/extension-toolkit/mixins/interface.js","webpack:///./node_modules/core-js/modules/es.array.every.js","webpack:///./src/interfaces/repeater/input.vue?5fe1"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","class","dragging","attrs","on","$event","endDrag","model","value","callback","$$v","rows","expression","_l","row","index","key","__key","repeaterFields","inline","options","template","duplicable","open","placeholder","toggleOpen","updateRow","removeRow","duplicateRow","addRow","_v","_s","createItemText","_e","staticRenderFns","ref","fields","length","field","interface","required","readonly","type","datatype","width","$emit","showPlaceholder","displayValue","rowOptions","rowOptionsClicked","directives","name","rawName","newItem","component","module","exports","props","id","String","default","Number","Boolean","collection","primaryKey","Object","relation","values","val","includes","$","$every","every","arrayMethodIsStrict","arrayMethodUsesToLength","STRICT_METHOD","USES_TO_LENGTH","target","proto","forced","callbackfn","arguments","undefined"],"mappings":"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","file":"js/chunk-6fde6a8a.76b06fb6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"interface-repeater\"},[_c('draggable',{staticClass:\"row-container\",class:{ dragging: _vm.dragging },attrs:{\"handle\":\".drag-handle\"},on:{\"start\":function($event){_vm.dragging = true},\"end\":_vm.endDrag},model:{value:(_vm.rows),callback:function ($$v) {_vm.rows=$$v},expression:\"rows\"}},_vm._l((_vm.rows),function(row,index){return _c('repeater-row',{key:row.__key,attrs:{\"row\":row,\"fields\":_vm.repeaterFields,\"inline\":_vm.inline,\"template\":_vm.options.template,\"duplicable\":_vm.options.duplicable,\"open\":_vm.open === index,\"placeholder\":_vm.options.placeholder},on:{\"open\":function($event){return _vm.toggleOpen(index)},\"input\":function($event){return _vm.updateRow(index, $event)},\"remove\":function($event){return _vm.removeRow(index)},\"duplicate\":function($event){return _vm.duplicateRow(index)}}})}),1),(_vm.addButtonVisible)?_c('div',{staticClass:\"add-new\",on:{\"click\":_vm.addRow}},[_c('v-icon',{attrs:{\"name\":\"add\",\"color\":\"--input-icon-color\"}}),_vm._v(\" \"+_vm._s(_vm.options.createItemText)+\" \")],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-sheet',{ref:\"interfaceRoot\",staticClass:\"repeater-row\"},[_c('div',{staticClass:\"header\"},[_c('div',{staticClass:\"drag-handle\"},[_c('v-icon',{attrs:{\"name\":\"drag_handle\"}})],1),_c('div',{staticClass:\"content\",class:{ 'two-up': _vm.inline && _vm.fields.length === 2 }},[(_vm.inline)?_vm._l((_vm.fields),function(field){return _c('v-ext-input',{key:field.field,attrs:{\"id\":field.interface || 'text-input',\"name\":field.field,\"required\":field.required,\"readonly\":field.readonly,\"options\":field.options,\"type\":field.type,\"datatype\":field.datatype,\"value\":_vm.row[field.field],\"fields\":_vm.fields,\"values\":_vm.row,\"length\":field.length,\"width\":field.width},on:{\"input\":function($event){return _vm.$emit('input', {\n\t\t\t\t\t\t\tfield: field.field,\n\t\t\t\t\t\t\tvalue: $event\n\t\t\t\t\t\t})}}})}):_c('button',{class:_vm.showPlaceholder ? 'placeholder' : 'preview',attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('open')}}},[_vm._v(\" \"+_vm._s(_vm.showPlaceholder ? _vm.placeholder : _vm.displayValue)+\" \")])],2),(_vm.duplicable)?_c('v-contextual-menu',{staticClass:\"more-options\",attrs:{\"placement\":\"bottom-end\",\"options\":_vm.rowOptions},on:{\"click\":_vm.rowOptionsClicked}}):_c('button',{attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.$emit('remove')}}},[_c('v-icon',{staticClass:\"remove\",attrs:{\"name\":\"delete_outline\"}})],1)],1),(_vm.inline === false)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.open),expression:\"open\"}],staticClass:\"body\"},[_c('v-form',{attrs:{\"full-width\":\"\",\"fields\":_vm.fields,\"values\":_vm.row,\"new-item\":_vm.newItem},on:{\"stage-value\":function($event){return _vm.$emit('input', $event)}}})],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<v-sheet ref=\"interfaceRoot\" class=\"repeater-row\">\r\n\t\t<div class=\"header\">\r\n\t\t\t<div class=\"drag-handle\">\r\n\t\t\t\t<v-icon name=\"drag_handle\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"content\" :class=\"{ 'two-up': inline && fields.length === 2 }\">\r\n\t\t\t\t<template v-if=\"inline\">\r\n\t\t\t\t\t<v-ext-input\r\n\t\t\t\t\t\tv-for=\"field in fields\"\r\n\t\t\t\t\t\t:id=\"field.interface || 'text-input'\"\r\n\t\t\t\t\t\t:key=\"field.field\"\r\n\t\t\t\t\t\t:name=\"field.field\"\r\n\t\t\t\t\t\t:required=\"field.required\"\r\n\t\t\t\t\t\t:readonly=\"field.readonly\"\r\n\t\t\t\t\t\t:options=\"field.options\"\r\n\t\t\t\t\t\t:type=\"field.type\"\r\n\t\t\t\t\t\t:datatype=\"field.datatype\"\r\n\t\t\t\t\t\t:value=\"row[field.field]\"\r\n\t\t\t\t\t\t:fields=\"fields\"\r\n\t\t\t\t\t\t:values=\"row\"\r\n\t\t\t\t\t\t:length=\"field.length\"\r\n\t\t\t\t\t\t:width=\"field.width\"\r\n\t\t\t\t\t\t@input=\"\r\n\t\t\t\t\t\t\t$emit('input', {\r\n\t\t\t\t\t\t\t\tfield: field.field,\r\n\t\t\t\t\t\t\t\tvalue: $event\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</template>\r\n\t\t\t\t<button\r\n\t\t\t\t\tv-else\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t:class=\"showPlaceholder ? 'placeholder' : 'preview'\"\r\n\t\t\t\t\t@click=\"$emit('open')\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{{ showPlaceholder ? placeholder : displayValue }}\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t<v-contextual-menu\r\n\t\t\t\tv-if=\"duplicable\"\r\n\t\t\t\tclass=\"more-options\"\r\n\t\t\t\tplacement=\"bottom-end\"\r\n\t\t\t\t:options=\"rowOptions\"\r\n\t\t\t\t@click=\"rowOptionsClicked\"\r\n\t\t\t></v-contextual-menu>\r\n\t\t\t<button v-else type=\"button\" @click=\"$emit('remove')\">\r\n\t\t\t\t<v-icon name=\"delete_outline\" class=\"remove\" />\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t\t<div v-if=\"inline === false\" v-show=\"open\" class=\"body\">\r\n\t\t\t<v-form\r\n\t\t\t\tfull-width\r\n\t\t\t\t:fields=\"fields\"\r\n\t\t\t\t:values=\"row\"\r\n\t\t\t\t:new-item=\"newItem\"\r\n\t\t\t\t@stage-value=\"$emit('input', $event)\"\r\n\t\t\t/>\r\n\t\t</div>\r\n\t</v-sheet>\r\n</template>\r\n\r\n<script>\r\nimport getFieldsFromTemplate from '@/helpers/get-fields-from-template';\r\n\r\nexport default {\r\n\tname: 'RepeaterRow',\r\n\tprops: {\r\n\t\trow: {\r\n\t\t\ttype: Object,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tfields: {\r\n\t\t\ttype: Array,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tinline: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\ttemplate: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: null\r\n\t\t},\r\n\t\tduplicable: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\topen: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tplaceholder: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tnewItem() {\r\n\t\t\tif (this.row.newItem === true) return true;\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tdisplayValue() {\r\n\t\t\tif (!this.template) {\r\n\t\t\t\treturn this.row[this.fields[0].field];\r\n\t\t\t}\r\n\r\n\t\t\tlet preview = this.$helpers.micromustache.render(this.template, this.row);\r\n\r\n\t\t\treturn preview;\r\n\t\t},\r\n\t\tshowPlaceholder() {\r\n\t\t\tlet fields = [this.fields[0].field];\r\n\r\n\t\t\tif (this.template) {\r\n\t\t\t\tfields = getFieldsFromTemplate(this.template);\r\n\t\t\t}\r\n\r\n\t\t\tconst fieldsHaveValue = fields.every(field => {\r\n\t\t\t\treturn this.row[field] !== null && this.row[field]?.length > 0;\r\n\t\t\t});\r\n\r\n\t\t\treturn fieldsHaveValue === false;\r\n\t\t},\r\n\t\trowOptions() {\r\n\t\t\treturn [\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t('delete'),\r\n\t\t\t\t\ticon: 'delete_outline'\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\ttext: this.$t('duplicate'),\r\n\t\t\t\t\ticon: 'control_point_duplicate'\r\n\t\t\t\t}\r\n\t\t\t];\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\trowOptionsClicked(option) {\r\n\t\t\tswitch (option) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tthis.$emit('remove');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tthis.$emit('duplicate');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.repeater-row {\r\n\tmargin-bottom: 8px;\r\n\tpadding: 0;\r\n}\r\n\r\n.header {\r\n\t--form-vertical-gap: 24px;\r\n\t--form-horizontal-gap: 12px;\r\n\t--type-label-size: 15px;\r\n\t--input-height: 44px;\r\n\t--input-font-size: 14px;\r\n\t--input-label-margin: 4px;\r\n\t--input-background-color-alt: var(--input-background-color);\r\n\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tmin-height: var(--input-height);\r\n\tpadding: var(--input-padding);\r\n\r\n\t.drag-handle {\r\n\t\tcolor: var(--input-icon-color);\r\n\t\tcursor: grab;\r\n\t}\r\n\r\n\t.content {\r\n\t\tflex-grow: 1;\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: repeat(1, 1fr);\r\n\t\tgrid-gap: 8px;\r\n\t\tpadding: 0 8px;\r\n\r\n\t\t&.two-up {\r\n\t\t\tgrid-template-columns: repeat(2, 1fr);\r\n\t\t}\r\n\r\n\t\t.placeholder {\r\n\t\t\tcolor: var(--input-placeholder-color);\r\n\t\t\tfont-style: italic;\r\n\t\t}\r\n\r\n\t\t.preview,\r\n\t\t.placeholder {\r\n\t\t\ttext-align: left;\r\n\t\t\tmin-height: 32px;\r\n\t\t}\r\n\t}\r\n\r\n\t.remove {\r\n\t\ttransition: color var(--fast) var(--transition);\r\n\t\tcolor: var(--input-icon-color);\r\n\t\t&:hover {\r\n\t\t\tcolor: var(--danger);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.body {\r\n\t--form-vertical-gap: 24px;\r\n\t--form-horizontal-gap: 12px;\r\n\t--type-label-size: 15px;\r\n\t--input-height: 44px;\r\n\t--input-font-size: 14px;\r\n\t--input-label-margin: 4px;\r\n\t--input-background-color-alt: var(--input-background-color);\r\n\tpadding: 8px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./row.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./row.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./row.vue?vue&type=template&id=1a233e1e&scoped=true&\"\nimport script from \"./row.vue?vue&type=script&lang=js&\"\nexport * from \"./row.vue?vue&type=script&lang=js&\"\nimport style0 from \"./row.vue?vue&type=style&index=0&id=1a233e1e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a233e1e\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n\t<div class=\"interface-repeater\">\r\n\t\t<draggable\r\n\t\t\tv-model=\"rows\"\r\n\t\t\thandle=\".drag-handle\"\r\n\t\t\tclass=\"row-container\"\r\n\t\t\t:class=\"{ dragging }\"\r\n\t\t\t@start=\"dragging = true\"\r\n\t\t\t@end=\"endDrag\"\r\n\t\t>\r\n\t\t\t<repeater-row\r\n\t\t\t\tv-for=\"(row, index) in rows\"\r\n\t\t\t\t:key=\"row.__key\"\r\n\t\t\t\t:row=\"row\"\r\n\t\t\t\t:fields=\"repeaterFields\"\r\n\t\t\t\t:inline=\"inline\"\r\n\t\t\t\t:template=\"options.template\"\r\n\t\t\t\t:duplicable=\"options.duplicable\"\r\n\t\t\t\t:open=\"open === index\"\r\n\t\t\t\t:placeholder=\"options.placeholder\"\r\n\t\t\t\t@open=\"toggleOpen(index)\"\r\n\t\t\t\t@input=\"updateRow(index, $event)\"\r\n\t\t\t\t@remove=\"removeRow(index)\"\r\n\t\t\t\t@duplicate=\"duplicateRow(index)\"\r\n\t\t\t/>\r\n\t\t</draggable>\r\n\t\t<div v-if=\"addButtonVisible\" class=\"add-new\" @click=\"addRow\">\r\n\t\t\t<v-icon name=\"add\" color=\"--input-icon-color\" />\r\n\t\t\t{{ options.createItemText }}\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport mixin from '@directus/extension-toolkit/mixins/interface';\r\nimport RepeaterRow from './row';\r\nimport shortid from 'shortid';\r\nimport { clone, keyBy } from 'lodash';\r\n\r\nexport default {\r\n\tname: 'Repeater',\r\n\tcomponents: {\r\n\t\tRepeaterRow\r\n\t},\r\n\tmixins: [mixin],\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\trows: [],\r\n\t\t\tdragging: false,\r\n\t\t\topen: null\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t// If the interface is able to display the fields inline\r\n\t\tinline() {\r\n\t\t\t// Only render inline when there are 1 or two fields\r\n\t\t\tif (this.repeaterFields.length > 2) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// If there's only 1 field, render it regardless of size\r\n\t\t\tif (this.repeaterFields.length === 1) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\t// Only render inline if there's enough space in the parent\r\n\t\t\t// We want to prevent the two interfaces being squashed togt\r\n\t\t\tif (['full', 'fill'].includes(this.width) === false) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\t// Only render inline if every field is configured to be half width\r\n\t\t\treturn this.repeaterFields.every(field => field.width === 'half');\r\n\t\t},\r\n\t\taddButtonVisible() {\r\n\t\t\tif (!this.options.limit || this.options.limit === 0) return true;\r\n\t\t\tif (this.rows.length < this.options.limit) return true;\r\n\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\t// This makes sure that the fields are always an array of fields. It makes sure the interface\r\n\t\t// is backwards compatible for people who have their repeater setup in an object structure\r\n\t\trepeaterFields() {\r\n\t\t\tif (Array.isArray(this.options.fields)) {\r\n\t\t\t\treturn this.options.fields;\r\n\t\t\t}\r\n\r\n\t\t\treturn Object.keys(this.options.fields).map(key => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...this.options.fields[key],\r\n\t\t\t\t\tfield: key\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.setRows();\r\n\t},\r\n\tmethods: {\r\n\t\taddRow() {\r\n\t\t\tthis.rows = [...this.rows, this.getNewRow()];\r\n\t\t\tthis.open = this.rows.length - 1;\r\n\t\t\tthis.emitValue();\r\n\t\t},\r\n\t\tupdateRow(index, { field, value }) {\r\n\t\t\tconst rows = clone(this.rows);\r\n\t\t\tconst currentRow = rows[index];\r\n\t\t\tconst newRow = {\r\n\t\t\t\t...currentRow,\r\n\t\t\t\t[field]: value\r\n\t\t\t};\r\n\r\n\t\t\trows[index] = newRow;\r\n\r\n\t\t\tthis.rows = rows;\r\n\t\t\tthis.emitValue();\r\n\t\t},\r\n\t\tremoveRow(index) {\r\n\t\t\tconst newRows = clone(this.rows);\r\n\t\t\tnewRows.splice(index, 1);\r\n\t\t\tthis.rows = newRows;\r\n\t\t\tthis.emitValue();\r\n\t\t},\r\n\t\tduplicateRow(index) {\r\n\t\t\tconst newRows = clone(this.rows);\r\n\t\t\tconst duplicatedRow = clone(this.rows[index]);\r\n\r\n\t\t\tnewRows.splice(index + 1, 0, duplicatedRow);\r\n\t\t\tthis.rows = newRows;\r\n\t\t\tthis.emitValue();\r\n\t\t},\r\n\r\n\t\temitValue() {\r\n\t\t\tlet value = clone(this.rows).map(row => {\r\n\t\t\t\tdelete row.__key;\r\n\t\t\t\treturn row;\r\n\t\t\t});\r\n\r\n\t\t\tif (value.length === 0) {\r\n\t\t\t\treturn this.$emit('input', null);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.options.structure === 'object') {\r\n\t\t\t\tthis.$emit('input', keyBy(value, this.options.structure_key));\r\n\t\t\t} else {\r\n\t\t\t\tthis.$emit('input', value);\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetNewRow() {\r\n\t\t\tconst row = {\r\n\t\t\t\t__key: shortid.generate(),\r\n\t\t\t\tnewItem: true\r\n\t\t\t};\r\n\r\n\t\t\tthis.repeaterFields.forEach(field => {\r\n\t\t\t\trow[field.field] = field.default;\r\n\t\t\t});\r\n\r\n\t\t\treturn row;\r\n\t\t},\r\n\t\t// There's two different structures in which the interface value can be saved\r\n\t\t// This method makes sure we're always using the same structure in the interface itself\r\n\t\tsetRows() {\r\n\t\t\tif (this.value === null) {\r\n\t\t\t\tthis.rows = [];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (Array.isArray(this.value)) {\r\n\t\t\t\tthis.rows = this.value;\r\n\t\t\t} else if (typeof this.value === 'string') {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.rows = JSON.parse(this.value);\r\n\t\t\t\t} catch {\r\n\t\t\t\t\tconsole.warn('Invalid JSON passed to repeater');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.rows = Object.values(this.value);\r\n\t\t\t}\r\n\t\t},\r\n\t\tendDrag() {\r\n\t\t\tthis.dragging = false;\r\n\t\t\tthis.emitValue();\r\n\t\t},\r\n\t\ttoggleOpen(index) {\r\n\t\t\tif (this.open === index) {\r\n\t\t\t\tthis.open = null;\r\n\t\t\t} else {\r\n\t\t\t\tthis.open = index;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.notice {\r\n\tmargin-bottom: 12px;\r\n}\r\n\r\n.add-new {\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tpadding: var(--input-padding);\r\n\tborder: var(--input-border-width) dotted var(--input-border-color);\r\n\tborder-radius: var(--border-radius);\r\n\tcolor: var(--input-text-color);\r\n\ttransition: var(--fast) var(--transition);\r\n\ttransition-property: color, border-color, padding;\r\n\tmin-height: var(--input-height);\r\n\tfont-size: var(--input-font-size);\r\n\tpadding: var(--input-padding);\r\n\tcursor: pointer;\r\n\t&:hover {\r\n\t\tborder-color: var(--input-border-color-hover);\r\n\t}\r\n\ti {\r\n\t\tmargin-right: 8px;\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./input.vue?vue&type=template&id=e44e62a2&scoped=true&\"\nimport script from \"./input.vue?vue&type=script&lang=js&\"\nexport * from \"./input.vue?vue&type=script&lang=js&\"\nimport style0 from \"./input.vue?vue&type=style&index=0&id=e44e62a2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e44e62a2\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./row.vue?vue&type=style&index=0&id=1a233e1e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./row.vue?vue&type=style&index=0&id=1a233e1e&lang=scss&scoped=true&\"","module.exports = {\n  props: {\n    // Unique id for this interface. Should be added to the lower level \n    // HTML input element if applicable. This ID will be used in the label's\n    // `for` attribute\n    id: {\n      type: String,\n      required: true\n    },\n    // Name of the field\n    name: {\n      type: String,\n      required: true\n    },\n    // The current value. This can either be the default value, the saved database\n    // value or the current state after the user made an edit\n    value: {\n      type: null,\n      default: null\n    },\n    // Type of the field, eg `string`, `hash`, or `array`\n    type: {\n      type: String,\n      required: true\n    },\n    // Max length\n    length: {\n      type: [String, Number],\n      default: null\n    },\n    // If the field is readonly or not\n    readonly: {\n      type: Boolean,\n      default: false\n    },\n    // Name of the collection\n    collection: {\n      type: String,\n      default: null\n    },\n    // Primary key of the item you're editing in this context\n    primaryKey: {\n      type: [Number, String],\n      default: null\n    },\n    // If the field is required or not\n    required: {\n      type: Boolean,\n      default: false\n    },\n    // Field options. A json object based on the interface's meta.json file\n    options: {\n      type: Object,\n      default: () => ({})\n    },\n    // If the item that's currently being edited is new\n    newItem: {\n      type: Boolean,\n      default: false\n    },\n    // The relation of the current field. Will contain information on the related\n    // collection and field(s)\n    relation: {\n      type: Object,\n      default: null\n    },\n    // The other fields in the current edit page\n    fields: {\n      type: Object,\n      default: null\n    },\n    // The values of the other fields on the edit page. Can be used for things like\n    // automatically generating a slug based on another field\n    values: {\n      type: Object,\n      default: null\n    },\n    width: {\n      type: String,\n      default: null,\n      validator(val) {\n        return [\n          'half',\n          'half-left',\n          'half-right',\n          'full',\n          'fill'\n        ].includes(val);\n      }\n    }\n  }\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $every = require('../internals/array-iteration').every;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar STRICT_METHOD = arrayMethodIsStrict('every');\nvar USES_TO_LENGTH = arrayMethodUsesToLength('every');\n\n// `Array.prototype.every` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.every\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || !USES_TO_LENGTH }, {\n  every: function every(callbackfn /* , thisArg */) {\n    return $every(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=e44e62a2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./input.vue?vue&type=style&index=0&id=e44e62a2&lang=scss&scoped=true&\""],"sourceRoot":""}